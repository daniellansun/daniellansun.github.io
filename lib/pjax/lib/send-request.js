var updateQueryString=require("./util/update-query-string");module.exports=function(e,t,r){t=t||{};var u;var n=t.requestOptions||{};var a=(n.requestMethod||"GET").toUpperCase();var s=n.requestParams||null;var o=n.formData||null;var i=null;var l=new XMLHttpRequest;var c=t.timeout||0;l.onreadystatechange=function(){if(l.readyState===4){if(l.status===200){r(l.responseText,l,e,t)}else if(l.status!==0){r(null,l,e,t)}}};l.onerror=function(u){console.log(u);r(null,l,e,t)};l.ontimeout=function(){r(null,l,e,t)};if(s&&s.length){u=s.map((function(e){return e.name+"="+e.value})).join("&");switch(a){case"GET":e=e.split("?")[0];e+="?"+u;break;case"POST":i=u;break}}else if(o){i=o}if(t.cacheBust){e=updateQueryString(e,"t",Date.now())}l.open(a,e,true);l.timeout=c;l.setRequestHeader("X-Requested-With","XMLHttpRequest");l.setRequestHeader("X-PJAX","true");l.setRequestHeader("X-PJAX-Selectors",JSON.stringify(t.selectors));if(i&&a==="POST"&&!o){l.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}l.send(i);return l};