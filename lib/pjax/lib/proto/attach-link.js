var on=require("../events/on");var clone=require("../util/clone");var attrState="data-pjax-state";var linkAction=function(t,e){if(isDefaultPrevented(e)){return}var r=clone(this.options);var o=checkIfShouldAbort(t,e);if(o){t.setAttribute(attrState,o);return}e.preventDefault();if(this.options.currentUrlFullReload&&t.href===window.location.href.split("#")[0]){t.setAttribute(attrState,"reload");this.reload();return}t.setAttribute(attrState,"load");r.triggerElement=t;this.loadUrl(t.href,r)};function checkIfShouldAbort(t,e){if(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey){return"modifier"}if(t.protocol!==window.location.protocol||t.host!==window.location.host){return"external"}if(t.hash&&t.href.replace(t.hash,"")===window.location.href.replace(location.hash,"")){return"anchor"}if(t.href===window.location.href.split("#")[0]+"#"){return"anchor-empty"}}var isDefaultPrevented=function(t){return t.defaultPrevented||t.returnValue===false};module.exports=function(t){var e=this;t.setAttribute(attrState,"");on(t,"click",(function(r){linkAction.call(e,t,r)}));on(t,"keyup",function(r){if(r.keyCode===13){linkAction.call(e,t,r)}}.bind(this))};